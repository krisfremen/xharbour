/*
 * $Id: ChangeLog,v 1.727 2003/02/16 16:00:08 likewolf Exp $
 */

/* Use this format for the entry headers:
   YYYY-MM-DD HH:MM UTC[-|+]hhmm Your Full Name <your_email@address>
   For example:
   2002-12-01 23:12 UTC+0100 Foo Bar <foo.bar@foobar.org>
*/

2003-02-17 11:15 UTC+0700 Andi Jahja <andijahja@harbour-id.net>
   * include/hbexprb.c
        ! fix bug on function RIGHT() if string is zero length.)

2003-02-16 18:30 UTC+0300 Phil Krylov <phil@mail.ru>
  * source/rtl/diskspac.c
    ! On HB_OS_BSD, include <sys/param.h> and <sys/mount.h> instead of
      <sys/vfs.h>.
  * source/rtl/seconds.c
    ! On HB_OS_BSD, include <sys/times.h> too.


2003-02-16 15:05 UTC+0100 Giancarlo Niccolai <gian@niccolai.ws>
  * source/rtl/trpc.prg
    ! Fixed an error in compressed/async function execution (prototype was wrong)

  * source/rtl/trpccli.prg
    ! Fixed various errors in compressed/async function call.

  * tests/rpcclient.prg
    ! Added a compressed and asynchronous function call test

  * tests/rpcserver.prg
    ! AEstetics upgrades (server name and function progress)
      Server has been tested with three clients working at the same time
      in both windows and linux environment, and seems to be stable.


2003-02-16 14:05 UTC+0100 Giancarlo Niccolai <gian@niccolai.ws>
  * source/rtl/trpc.prg
    ! Fixes to thread termination signaling

2003-02-16 11:45 UTC+0100 Francesco Saverio Giudice <info@fsgiudice.com>
  * makefile.bc
    + source/rtl/hbserial.prg
    + source/rtl/hbsrlraw.c
    + source/rtl/trpccli.prg
    + source/rtl/trpc.prg

2003-02-16 04:05 UTC+0100 Giancarlo Niccolai <gian@niccolai.ws>
  * source/rtl/trpc.prg
    ! Fixes to some timeout issues
  * source/rtl/trpccli.prg
    ! Fixes to some timeout issues
    + Added auto-initialization of InetInit()

  + tests/rpcclient.prg
  + tests/rpcserver.prg
    + Added test program for rpc stuff. Very basic and simple, but
      they give an idea...


2003-02-15 21:20 UTC-0500 Paul Tucker <ptucker@sympatico.ca>
  * source/rtl/regex.c
    ! added casts for aslogicals...
    ! comment out basically empty switch statment. (again it seems)
  * source/rtl/hbsrlraw.c
    ! Added a few more casts
  * makefile.vc
  * makefile.nt
    - removed SIMPLEX checks
    + source/rtl/trpccli.prg
    + source/rtl/trpc.prg

2003-02-16 01:00 UTC+0100 Giancarlo Niccolai <gian@niccolai.ws>
  * source/rtl/hbserial.prg
  * source/rtl/hbsrlraw.c
    + Added HB_DeserialBegin() and HB_DeserialNext() for easier
      serializationa and deserialization of streams.
    + Fixed a bug in serialization of nested arrays
    + HB_CreateLen8() can now create the 8 bytes system independent
      lenght field both on the fly (returning a raw string) and
      operating on a pre-built string.
      HB_CreateLen8( nLongInt ) -->cSysUndepNumber
      HB_CreateLen8( @cSysUndepNumber, nLongInt ) --> NIL

  + tests/serialize.prg
    + Added a test (and demo) for serialization and deserialization.

  ! doc/inet.txt
    ! Typos in docs have been corrected

  * source/rtl/Makefile
  + source/rtl/trpccli.prg
  + source/rtl/trpc.prg
    + Added XHARBOUR specific class oriented Remote Procedure Call
      support (server and client side). This is HIGHLY experimental
      and in the CVS just to let the developers to have a preview at
      this. Have FUN :-)


2003-02-15 16:15 UTC-0500 Paul Tucker <ptucker@sympatico.ca>
  * source/compiler/cmdcheck.c
    ! Calls to free() replaced with calls to hb_xfree().
    ! minor simplification to case where hb_strdup() was used.
  * source/compiler/genc.c
    ! Compiler outputs C style paths for #line directives
    ! '#line 139 source\compiler\genc.c'->'#line 139 source\\compiler\\genc.c'
  * source/rtl/regex.c
    ! added casts for aslogicals...
  * source/rdd/dbcmd/c
    ! comment out unused pFileExt in DBUSEAREAD
  * source/rtl/hbsrlraw.c
    ! Added a number of casts
  * makefile.nt
    ! modified for faster execution.
    + source/rtl/hbserial.prg
    + source/rtl/hbsrlraw.c
  * makefile.vc
    + source/rtl/hbserial.prg
    + source/rtl/hbsrlraw.c

2003-02-15 00:01 UTC-0200 Luiz Rafael Culik <culikr@uol.com.br>
  * contrib/mysql/mysql.prg
    ! Fixed Eof() in method GetRow() from TMySQLQuery
    % changed Set(4) to Lower( Set( 4 ) )
    Eof() Bug reported by Rafael Letocart

2003-02-14 19:10 UTC-0200 Luiz Rafael Culik <culikr@uol.com.br>
  * contrib/hbzlib/zipnew.cpp
    contrib/hbzlib/zipcomp.cpp
     ! Major Formatting
     % Fixed Gpf
     % Fixed Return from hb_zipfile()/hb_zipfilebytdspan() and hb_zipfilebypkspan() function when File was not
      able to be created or the file to be added to zipfile is invalid( Reported By Jon Berg)
     ! Code Clean up
  * contrib/mysql/mysql.prg
     ! method GetRow() from TMySQLQuery class and Function ClipValue2SQL() Respect Set Date Setting
  * contrib/rdd_ads/adsfunc.c
     ! Minor formating
     % Renamed Function ADSROLLBACKTRANSACTION() to ROLLBACK() Per request
     + ADSDDCREATE() and ADSCONNECT60() function added to ADS 6.0 compile Section

2003-02-14 18:10 UTC+0100 Giancarlo Niccolai <gian@niccolai.ws>
  * source/rtl/Makefile
  + source/rtl/hbserial.prg
  + source/rtl/hbsrlraw.c
    ! Added basic datatype serialization: the functions
      HB_Serialize( Data )--> cSeralbuffer
      HB_Deserialize( cSerialbuffer )--> Data
      Can transform basic types into a string that can be
      safely stored on streams. It works also with arrays
      (and recursively!), but I have still not tested it
      with objects. Any way, the best way to serialize
      object is to use the HBPersistent interface.

  * source/rtl/regex.c
    + added function HB_RegexMatch, working like HB_Regex() but
      returning just .T. or .F. if match is achieved or not.
      This is to save garbage activity in releasing uneeded
      objects when you just have to know if a regex can be
      matched.


2003-02-14 05:50 UTC-0500 Paul Tucker <ptucker@sympatico.ca>
  * source\vm\inet.c
    ! INETSETTIMEOUT
      Socket was not being assigned a value.
  * source\rdd\dbfcdx\dbfcdx1.c
    ! hb_cdxTagDoIndex
      Removed unused bCondAll and bCondRest

2003-02-14 00:30 UTC-0200 Luiz Rafael Culik <culikr@uol.com.br>
  * contrib/hbzlib/zip.c
    ! Source code reformatted

2003-02-13 12:15 UTC-0300 Marcelo Lombardo <lombardo@uol.com.br>
  * source/rdd/dbfcdx/dbfcdx1.c
    ! Fixed hb_cdxOrderListFocus() to not change the Found() status

2003-02-13 02:20 UTC+0100 Giancarlo Niccolai <gian@niccolai.ws>
  ! source/rdd/Makefile
    ! RDD was not compiling in MT mode (mingw)

  * source/vm/estack.c
    * a minor stylistic fix in defines

  ! source/vm/inet.c
    ! Wrong length parameter in InetDGramRecv

  * source/vm/thread.c
    * Minor stylistic changes

  ! samples/sitesvr/Makefile
    ! Was linking pp.lib instead of ppmt.lib

  * samples/sitesvr/sitesvr.prg
    * Some tests and work in progress


2003-02-12 20:15 UTC+0100 Marek Paliwoda <paliwoda@inetia.pl>
  * source/vm/extend.c
  * source/vm/itemapi.c
    * Added possibility to get values from LOGICAL vars
      when retrieving numeric values at a C level (you
      will get 0 or 1).

  * source/vm/hvm.c
    * Added support for C-like IF <numeric> conditions.
      This is DISABLED by default. Enabled only when
      compiled with HB_USE_NUMERIC_IF defined.

2003-02-12 11:30 UTC-0200 Luiz Rafale Culik <culikr@uol.com.br>
  * source/common/hbffind.c
   ! minor Format
   + Support for open watcom
  * config/dos/watcom.cf
  + config/w32/watcom.cf
    ! Proper ajusted to work with Open watcom
  * utils/hbmake/hbmake.prg
    utils/hbmake/hbmutils.prg
    % Optimized the Code by replacing At( Exp, Source ) > 0  with Exp IN Source
      Replace IF with Swtich Case Where Possible
      Replace For n:=1 to Len(Array) with FOR EACH info IN Array when Possible
      Source Code Totally Reformated

2003-02-12 12:20 UTC+0100 Giancarlo Niccolai <gian@niccolai.ws>
  ! config/linux/gcc.cf
  ! config/w32/mingw32.cf
    ! fixed making of samples directory (I wonder how this has
      passed through up to date).
  ! samples/sitesvr/Makefile
    - Removed pthread from libs; now pthread is added by the makefiles
      on need.

2003-02-12 11:35 UTC+0100 Giancarlo Niccolai <gian@niccolai.ws>
  * source/rtl/hbcompress.c
    ! Strings created on the fly are now returned with
      retcAdoptRaw, and thus they don't issue any warning on
      on probram closing anymore.
    ! hb_xfree() of the preallocated buffer, in case of error,
      was freed in the wrong branch of "if". Fixed.
    ! pDestLen is not used in hb_uncompress(). Removed.
    * Buffer created on the fly for compression is now a little bigger,
       for safety. We will reduce it again if we see that this is fine.

  * tests/compress.prg
    + Added comments to explain something
    * Minor stylistic fixes.


2003-02-11 22:30 UTC-0500 Paul Tucker <ptucker@sympatico.ca>
  * makefile.vc
  * makefile.nt
  * source\rtl\hbcompress.c
    ! MSVC Support (untested)

2003-02-12 02:20 UTC-0200 Luiz Rafale Culik <culikr@uol.com.br>
  * Makefile.bc
  + source/rtl/hbcompress.c

2003-02-11 21:14 UTC-0500 Paul Tucker <ptucker@sympatico.ca>
   * contrib/what32/source/_winclpb.c
      ! GETCLIPBOARDFORMATNAME
        removed unused cchMaxCount
   * contrib/what32/source/_windll.c
      ! CALLDLL
        removed unused float  FltParms[15];
   * contrib/what32/source/_wininet.c
      ! FTPCOMMAND
        phFtpCommand  should be an HINTERNET, not a pointer.
   * contrib/what32/source/_winhead.c
      ! HEADER_GETITEM
        hdi should be an HDITEM, not a pointer to it.
   * contrib/what32/source/_winmenu.c
      ! added cast in call to GetMenuItemInfo
   * contrib/what32/source/_winlv.c
      ! LISTVIEWNOTIFY
        commented out unused szString decl
   * contrib/what32/source/_winsys.c
      ! GETUSERNAME
        nSize is a DWORD, not a pointer.
      ! GETVERSIONEX
        msvc didn't like the OSVERSIONEX* cast
   * contrib/what32/source/_winsock.c
      + added #define _WINSOCKAPI_
      ! This prevents the inclusion of Winsock.h in Windows.h
      ! since Winsock2.h is already being included further down
      ! the list.
      ! RECVFROM
        _retni() was being called twice.  It appears to me that
        the intent was to return the result of recvfrom()
      ! SETSOCKOPT
        commented out unused s
      ! WSASTARTUP
        WSAData should be a WSADATA, not a pointer
      ! WSAACCEPT
        commented out unused s
   * contrib/what32/source/_winmous.c
     ! GETCURSORINFO
      pci should be a CURSORINFO, not a pointer.
   * contrib/what32/source/_winwnd.c
     ! GETTITLEBARINFO
       pti should be a TITLEBARINFO, not a pointer.
   * contrib/what32/source/_winshell.c
     ! DRAGQUERYPOINT
       lpPoint should actually be a POINT, not a pointer.
   * contrib/what32/source/wincore.prg
     ! Changed Otherwise: to Default:
   * contrib/what32/source/_winicon.c
     ! GETICONINFO
       ii should be an ICONINFO, not a pointer.
     ! EXTRACTASSOCIATEDICON
       lpilcon should be a WORD not a pointer to one.
   * contrib/what32/source/_windlg.c
     ! MAPDIALOGRECT
       lpRect is only a pointer to a RECT.  It is being used
       as if it IS a RECT.  Changed into a rect, and passed
       address to MapDialogRect
   * contrib/what32/source/_winbmp.c
     ! CreateDIBSection()
       VOID ** ppBits -> VOID ** ppBits = (VOID **)0;
       to remove 'use before initialise' warning
   * contrib/what32/makefile.nt
   * contrib/what32/makefile.vc
   * contrib/what32/make_vc.bat
     ! Now compiles with MSVC

2003-02-12 02:10 UTC+0100 Giancarlo Niccolai <gian@niccolai.ws>
  * source/rtl/Makefile
  + source/rtl/hbcompress.c
    + Added compression routines based on a xharbour rearrangement
      of original (and free) zlib compression code.
      HB_COMPRESS( cSource [, nSourceLen ] ) --> cDest
      HB_COMPRESS( nComprFactor, cSource [,nSourceLen ] ) --> cDest
      HB_COMPRESS( cSource, nSourceLen, @cDest, @nDestLen ) --> nError
      HB_COMPRESS( nComprFactor, cSource, nSourceLen, @cDest, @nDestLen )
            --> nError

      HB_UNCOMPRESS( nDestLen, cSource [, nSourceLen ] ) --> cDest
      HB_UNCOMPRESS( nDestLen, cSource, nSourceLen, @cDest ) --> nError

      HB_COMPRESSERROR() --> nError
      HB_COMPRESSERRORDESC() -->cDesc
      HB_COMPRESSBUFLEN( nUncompressedLen )--> nDefaultBufLen

      There are some latest/minor fixes in memory allocation to
      be made, but the thing is working, and can only get better.
      Stream oriented incremental compression can also be achieved
      in the future (just wrapping the zlib a little more.

  * include/Makefile
  + include/hbcompress.h
    + RTL specific compilation headers

  + include/hbcompress.ch
    * PRG level definitions for usage with zlib. Not required, but
      useful (e.g. errror level meanings).

  + tests/compress.prg
    + A test for basic string compression functions

2003-02-11 03:20 UTC-0800 Augusto Infante <august213@sbcglobal.net>
   * source/rtl/seconds.c
     * Removed (void) parameter in line 150   " d = hb_dateSeconds(  ); "


2003-02-11 02:30 UTC+0100 Przemyslaw Czerpak <druzus@polbox.com>
  * source/rtl/diskspac.c
    + added support for diskspace on UNIX platforms
      (first parameter is path if omitted "/" is checked)

  * source/rtl/seconds.c
    + new function added SECONDSCPU(n) which reports how many CPU and/or
      system seconds have elapsed since the beginning of the program execution.
      n == 1  utime  -> user CPU time of the current process
      n == 2  stime  -> system CPU time behalf of the current process
      n == 3  u + s  -> sum of utime + stime (default)
      n == 11 cutime -> sum of the user CPU time of the current + child process
      n == 12 cstime -> sum of the system CPU time of the current + child process
      n == 13 cu+cs  -> sum of cutime + cstime
      I have to ask someone similar with Windows to add support for this
      function. I found 'GetProcessTimes' in WIN API which can be used for
      NT based platforms but I cannot find anything for WIN 9X/ME.

  * source/pp/ppcore.c
    * allow to compile file with <CR><LF> on *nix platforms.
      It's dirty hack but works good for me and resolves one of the
      most important problem with common CLIPPER and Harbour
      (and other XBASE compatible compilers like FlagShip and CLIP)
      sources - only [x]Harbour cannot compile files with <CR>.

  * source/compiler/cmdcheck.c
    ! fix which allow to use file names with '-' char in '-o' option

  + bin/hb-mkslib
    + simple script which creates shared libraries for Linux for
    static ones (*.a) and/or object files (*.o).

2003-02-10 22:40 UTC-0500 Paul Tucker <ptucker@sympatico.ca>
   * makefile.nt
   * makefile.vc
   * make_vc.bat
     * make_vc /? for help
     ! re-supply missing changes, and re-synch files.
   * contrib/rdd_ads/adsfunc.c
     ! added some needed typecasts.

2003-02-10 10:50 UTC-0200 Luiz Rafael Culik <culikr@uol.com.br>
  * source/rtl/filesys.c
    ! fix to macro EACESS changes to EACCES
  * source/rtl/isprint.c
    ! Move IsPrinterReadyn to Win32 Section of source code
      Minor Formating by changing Tabs to Spaces

2003-02-09 17:21 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * include/hbpp.h
    * Increased HB_PP_STR_SIZE to 16384

2003-02-09 17:21 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * include/hbapi.h
  * source/vm/arrays.c
    + Added 5th BOOL paramater to hb_arrayScan()
  * source/vm/arrayshb.c
    + Added support for 5th optional paramater <bExact> to aScan()

  * source/vm/hvm.c
    * Modified IN operator to use bExact as TRUE when applied to Arrays.

  * tests/pp.prg
    * Few corrections of important typos in CompileRule()
    * Increased MAX_CICLES to 256

2003-02-09 10:50 UTC-0200 Luiz Rafael Culik <culikr@uol.com.br>
  * source/common/hbffind.c
    % Replace Direct errno convertion in DOS Section to an Call to GnuErrtoDosErr()
  * include/hbapifs.h
    Added GnuErrtoDosErr() prototype
  * source/rtl/filesys.c
    + GnuErrtoDosErr() function added to Proper Convert GNU Errno Values to Proper DosValues.
    + Also Called GnuErrtoDosErr() in hb_fsCreate() and hb_fsOpen() Apis and on Sections to DJGPP compiler
  * source/rtl/tprinter.c
    *THarbourPrinter_GetPrinterNameByPort() changes for usage on new function inside isprint.c
  * source/rtl/isprint.c
    + Functions Xisprinter() and PRINTERPORTTONAME()
       This function Xisprinter() Test the status of the printer, return 0 if no error, 10 to 19 for Printer Errors and 20 to 23 for Jobs error
    The PRINTERPORTTONAME() return the Instaled printer name from an given Port
  * utils/hbmake/hbmake.prg
    utils/hbmake/hbmutils.prg
     * Minor fixed to Editor mode

2003-02-08 16:08 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * include/hbinit.h
    + Added initial support for lcc

  * source/common/hbffind.c
    + Added missing #include.

  * source/pp/ppcomp.c
    + Added 1 missing formal return statment.

  * source/rtl/filesys.c
    * Formatting and 1 missing X__WIN32__ gurad.

2003-02-07 10:16 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/rtl/inkey.c
    * Fixed declarations in body compile error.
    * Minorformating and optimization.

2003-02-07 15:50 UTC+0100 Giancarlo Niccolai <gian@niccolai.ws>
  * source/rtl/inkey.c
    ! Keyboard chr( 0 ) was hanging the next inkey() instead of cleaning
      the input buffer. Now it is fixed.

2003-02-07 11:30 UTC+0100 Giancarlo Niccolai <gian@niccolai.ws>
  * include/inet.h
    ! Fixed a misinclude that appeared in redhat 6.0

  * source/vm/inet.c
    + Added InetGetTimeout() to query the assigned timeout of a socket.

  * doc/inet.txt
    + Added api doc of InetGetTimeout()

2003-02-06 02:00 UTC-0300 Walter Negro <anegro@overnet.com.ar>
  * source/rtl/tbrowse.prg
    ! Fix display problem when not exist Head Separator.
      Reported by Luiz Culik and Ian Anderson.
  * source/rtl/dbedit.prg
    ! Fix behavior when use UDF function.
      Reported by Luiz Culik
  * contrib/mysql/mysql.c
    ! Fix conditional compilation for filelenght() function
      Reported by Juan Jose and Luca Bellini.

2003-02-07 02:30 UTC+0700 Andi Jahja <andijahja@harbour-id.net>
  * source/rtl/tbrowse.prg
    ! Bug fix on decimal display of numeric field.
      Reported by: vicente@guerra.com.mx (Vicente Guerra)
