/*
 * $Id: ChangeLog,v 1.2406 2004/02/25 17:59:59 walito Exp $
 */

/* Use this format for the entry headers:
   YYYY-MM-DD HH:MM UTC[-|+]hhmm Your Full Name <your_email@address>
   For example:
   2002-12-01 23:12 UTC+0100 Foo Bar <foo.bar@foobar.org>
*/

2004-02-25 18:45 UTC-0300 Marcelo Lombardo <marcelo@xharbour.com.br>
  * source/rdd/dbcmd.c
    ! Fixed recently introduced GPF when RDD has no default file extension

2004-02-25 14:50 UTC-0300 Walter Negro <anegro@overnet.com.ar>
  * source/rdd/dbcmd.c
    ! Fix behavior of DbSetFilter(), with out parameters clear filter.
      Reported by Cesar Lozada

2004-02-25 13:10 UTC-0300 Luiz Rafael Culik Guimaraes <culikr@brturbo.com>
  * source/vm/hvm.c
    !minor typo fix on line 5004

2004-02-25 12:45 UTC-0300 Luiz Rafael Culik Guimaraes <culikr@brturbo.com>
  * source/rtl/trim.c
    same fix as bellow

2004-02-25 12:40 UTC-0300 Luiz Rafael Culik Guimaraes <culikr@brturbo.com>
  * source/vm/arrays.c
  * source/vm/debug.c
  * source/vm/fastitem.c
  * source/vm/fm.c
  * source/vm/hvm.c
  * source/vm/memvars.c
    !minor fix due my last changes
      pItem->item.asString.puiHolders =  (USHORT*) hb_xgrab( sizeof( USHORT ) ) ; to
    pitem->item.asString.puiHolders =  (ULONG*) hb_xgrab( sizeof( ULONG ) );

2004-02-25 21:30 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
contrib/hbzlib/zip.c
  * contrib/hbzlib/zipcomp.cpp
  * contrib/hbzlib/zipnew.cpp
    % more optimization using HB_ITEM
    % replace hb_retc()/hb_xfree() construct with hb_retcAdopt()
    ! change public variable from pArray to ZipArray to avoid confusion
      because some internal zip functions use pArray as parameters.

2004-02-26 08:55 UTC-0300 Antonio Carlos Pantaglione <toninho@fwi.com.br>
  * source/vm/classes.c
    ! Fixed compiling errors when using array owners management.


   * include/hbvmpub.h
     in structure struString changes
     USHORT *piuHolders  to ULONG  *puiHolders

2004-02-25 03:50 UTC-0500 Paul Tucker <ptucker@sympatico.ca>
   * makallbc.bat
   * makallvc.bat
     + contrib/design
     * changed hwgui detection.
    (thanks to gpiemonte for the update)

2004-02-24 00:45 UTC-0300 Marcelo Lombardo <marcelo@xharbour.com.br>
  * source/vm/hash.c
     ! Removed debug Tracelogs

2004-02-24 13:20 UTC+1200 Peter Rees <peter(AT)rees.co.nz>
  * contrib/mysql/mysql.c
    ! HB_FUNC(SQLFETCHR),HB_FUNC(SQLFETCHF), HB_FUNC(SQLLISTDB), HB_FUNC(SQLLISTTBL)
      -   fixed memory leaks

2004-02-24 19:25 UTC+0100 Giancarlo Niccolai <gc [at] niccolai [dot] ws>
  * source/rdd/dbcmd.c
    ! in COPY TO and APPEND FROM, if target file were missing
      extension, a SEFGAULT may arise: strcat function was used to
      add some data to a string obtained from hb_parc(), which is
      to be considered read-only. Reported by Pritpal.
    % optimization of some PHB_ITEM with HB_ITEM. Using hb_itemClear
      to clear the item instead of hb_itemRelease() to release the
      item pointer.

  ! doc/howtoext.txt
    ! typos & sentences
    ! note on hb_itemClear() in memory management section.

2004-02-24 12:45 UTC-0500 Paul Tucker <ptucker@sympatico.ca>
  * include/hbrddfpt.h
  * source/rdd/dbffpt/dbffpt1.c
    + support for 2 additional types when arrays found in memo fields

2004-02-24 09:32 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/vm/classes.c
    ! Fixed initialization of INIT datas of Blocks pSelfBase to appropriate pSelf.

  * source/rtl/cstr.prg
    + Added HB_QSlef() as 2nd argument of generated HB_RestoreBlock() in ValToPrgExp()

2004-02-24 22:30 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  + contrib/design/general.prg
  + contrib/design/makefile.bc
  + contrib/design/makefile.vc
  + contrib/design/makelib.bat
  + contrib/design/make_b32.bat
  + contrib/design/make_vc.bat
  + contrib/design/readme.txt
  + contrib/design/tbox.prg
  + contrib/design/tcheck.prg
  + contrib/design/tmenu.prg
  + contrib/design/tradio.prg
  + contrib/design/twindow.prg
  + tests/design.prg
    + text mode screen designer and code generator

2004-02-24 20:00 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * contrib/hbzlib/zipcomp.cpp
  * contrib/hbzlib/zipnew.cpp
    ! Optimized using HB_ITEM

  /*
    To Luiz:
    File attributes are different for each C-Compiler ?
    BCC :  --wa*
    MSVC:  Ÿúp*
  */

2004-02-24 09:21 UTC-0300 Luiz Rafael Culik Guimaraes <culikr@brturbo.com>
  - contrib/xhwgui/*
    ! removed hwgui sources from cvs
  + tests/datad.prg
    ! test program that demostrate adsrdd data dictionaries capabilities

2004-02-23 22:24 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * tests/pp.prg
  * tests/pp_harb.ch
    + Added support for incremental compliation and execution.

2004-02-23 20:50 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/macro/macro.y
    ! Fixed GPF Traps on compilation error.

2004-02-23 19:14 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/vm/hvm.c
    ! Fixed reversed arguments for :Keys() and :Values() pseudo methods of Hash.
    % Optimized out HB_ITEM, byt using &(HB_VM_STACK.Return) directly as the receiver.

  * source/vm/proc.c
    ! Fixed GPF trap, when Object Method is not a valid Method for that class.

  * tests/pp.prg
  * tests/pp_harb.ch
    * Few revisions and minor fixes.

  * tests/prgscrpt.prg
    * Revised to reflect latest.

2004-02-23 03:05 UTC-0800 Brian Hays <bhays@abacuslaw.com>
  * doc/howtoext.txt
     ! Fixed some typos

2004-02-24 02:55 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * include/hbapiitm.h
  * source/vm/itemapi.c
  * contrib/hbzlib/zip.c
    * reverted introduction of hb_itemParamStack() function since it is
      against common programming concept when dealing with structure and
      is a definitive GPF trap.

2004-02-23 01:45 UTC-0300 Marcelo Lombardo <lombardo@uol.com.br>
  * doc/howtoext.txt
     + Added Section 1, 9 - 11
     ! Fixed some typos

2004-02-23 22:50 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * contrib/winprn/tprint.prg
    ! fix memory leaks.

2004-02-23 20:05 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/rdd/dbcmd.c
    ! fix memory leaks on non Borland compiler

2004-02-23 17:05 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/rtl/descend.c
  * source/rtl/datec.c
  * source/rtl/dateshb.c
  * source/rtl/memofile.c
  * source/rtl/minmax.c
  * source/rtl/mtran.c
  * source/rtl/gx.c
  * source/rtl/hardcr.c
  * source/rtl/gtcgi/cgiread.c
  * source/rdd/workarea.c
  * source/rdd/dbfdbt/dbfdbt1.c
  * source/rdd/dbfcdx/dbfcdx1.c
  * source/vm/itemapi.c
  * source/vm/estack.c
  * source/vm/errorapi.c
  * source/vm/hbi18n.c
  * source/vm/arrays.c
  * source/vm/asort.c
  * source/vm/memvars.c
    % a few left out on optimization to directly use member of PHB_ITEM

2004-02-23 15:25 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/rtl/binnum.c
  * source/rtl/binnumx.c
  * source/rtl/descend.c
  * source/rtl/direct.c
  * source/rtl/strtran.c
  * source/rtl/natmsg.c
  * source/rtl/oemansi.c
  * source/rtl/set.c
  * source/rtl/soundex.c
  * source/rtl/transfrm.c
  * source/rtl/substr.c
  * source/rtl/val.c
  * source/rtl/gtgraph.c
  * source/rtl/hbxml.c
  * source/rtl/filestat.c
  * source/rtl/hboutdbg.c
  * source/rtl/hbcomprs.c
  * source/rdd/dbcmd.c
  * source/rdd/dbf1.c
  * source/rdd/dbfcdx/dbfcdx1.c
  * source/rdd/dbfntx/dbfntx1.c
  * source/vm/arrays.c
  * source/vm/do.c
  * source/vm/eval.c
  * source/vm/thread.c
  * source/vm/memvars.c
    % optimize to directly use member of PHB_ITEM wherever possible.

2004-02-23 11:10 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/vm/itemapi.c
    % optimize hb_itemPadConv() to directly use member of PHB_ITEM.

  * source/rtl/chrasc.c
  * source/rtl/right.c
  * source/rtl/hardcr.c
    % optimize to directly use member of PHB_ITEM.

2004-02-23 00:40 UTC-0300 Luiz Rafael Culik Guimaraes <culikr@brturbo.com>
  * contrib/libct/disk.c
    ! minor fix to dirname() function

2004-02-23 14:05 UTC+1200 Peter Rees <peter(AT)rees.co.nz>
  * source/rtl/idle.c
    ! hb_idleDelFunc() - fix memory leak

2004-02-23 13:15 UTC+1200 Peter Rees <peter(AT)rees.co.nz>
  * source/rtl/inkey.c
    ! SetInkeyBeforeBlock()/SetInkeyAfterBlock() - fix possible memory leaks
  * source/rtl/gtwvt/gtwvt.c
    + hb_wvt_gtTextOut() - altered to handle ClearType fonts correctly
       ( Thanks to Oscar Hernandez Suarez )

2004-02-23 05:10 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * include/hbapi.h
  * source/common/hbstr.c
    + char *hb_xstrcpy( char*, const char*, ...) -> concatenates multiple
      strings into a single result.

  + tests/xstrcpy.prg
    * test program for hb_xstrcpy()

2004-02-23 03:40 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * include/hbapi.h
  * source/common/hbstr.c
    + char *hb_xstrcat( char*, const char*, ...) -> concatenates multiple
      strings into a single result.

  + tests/xstrcat.prg
    * test program for hb_xstrcat()

  * source/rtl/len.c
  * source/rtl/empty.c
    % Optimization by directly using member of PHB_ITEM

  * source/rtl/is.c
    + PRG level wrappers for some macros:
      * ISALNUM()
      * ISCNTRL()
      * ISGRAPH()
      * ISPRINT()
      * ISPUNCT()
      * ISSPACE()
      * ISXDIGIT()
      * ISASCII()
      /*
        Full description is in program body
      */

2004-02-22 18:01 UTC+0100 Giancarlo Niccolai <gc [at] niccolai [dot] ws>
  + doc/howtoext.txt
    + beginned a small tutorial on essential things to know to write an
      xharbour extension. Important notes on memory usage and concepts.
      Everyone's invited in adding it's contribute.

  * doc/hbxml.txt
    * minor layout

  * include/hbapi.h
    - removed unexisting function definition. Was a leftover of some other
      works.

2004-02-22 19:20 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * include/hbapiitm.h
  * source/vm/itemapi.c
    + HB_ITEM hb_itemParamStack( USHORT ) to create a copy of an item
      parameter inside the eval stack

  * contrib/hbzlib/zip.c
    ! now using hb_itemParamStack() for progress codeblock

2004-02-22 10:29 UTC+0100 Lorenzo Fiorini <lorenzo_fiorini/at/tin.it>
  * source/rdd/dbcmd.c
    ! fixed memory leak when ordlistadd fails.

2004-02-22 08:42 UTC+0100 Giancarlo Niccolai <gc [at] niccolai [dot] ws>
  * source/vm/estack.c
  * source/vm/hvm.c
    ! de-tangled termination sequence for MT. Many overkills that were
      introduced before are now removed, and only essential code is
      (or should be) in.

  * source/vm/thread.c
    ! Detangled termination sequence
    ! As hb_treadKillAll() is now an idle inspector, and unkind
      cancelation is serial to the cancellor in windows implementation,
      all the cares taken in the hb_threadTermination() routine must NOT
      be used; a subset of what is needed is moved into hb->threadKillAll()

  * source/vm/garbage.c
    ! Latest bool flag added to hb_gcCollectAll was not added to MT branch;
      this caused every MT program to collect at the end as if
      hb_gcCollectAll( FALSE ) was called, causing unfreed memory. PLZ,
      try to have a little of regards in adding things also in MT
      branches...

  * tests/mtcomplex.prg
  * tests/mttest.prg
    * visual & better reporting.


2004-02-22 07:58 UTC+0100 Giancarlo Niccolai <gc [at] niccolai [dot] ws>
  * source/vm/hbi18n.c
    ! fixed memory leaks. Were using hb_arrayRelease() instead of hb_itemRelease()!!!

2004-02-22 05:30 UTC+0100 Giancarlo Niccolai <gc [at] niccolai [dot] ws>
  * include/hashapi.h
  * source/vm/hash.c
    * hb_hashClone, hb_hashGetKeys and hb_hashGetValues now accepts an extra
      nullable HB_ITEM pointer; if this is not null, the new object is stored
      in the provided item, else a new item is dinamically created. hb_hashNew
      was already working that way.
    % Optimized all replication operation by using HB_ITEMs allocated in the
      stack and never calling hb_itemRelease().

  * source/vm/hvm.c
  * source/vm/classes.c
    ! a couple of hb_itemPutxx() were missing HB_IT_NIL initialization.
    * updated hb_hash* function calls with the new parameter convntion.
    % Optimized hash cloning operators like i.e. "+", "-" and "+=" as above

2004-02-22 23:00 UTC-0300 Luiz Rafael Culik Guimaraes <culikr@brturbo.com>
  * contrib/hbzlib/zipnew.cpp
  * contrib/hbzlib/zip.c
    ! fix memory leaks

2004-02-22 08:10 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * contrib/hbzlib/zipcomp.cpp
  * contrib/hbzlib/zip.c
    ! fix memory leaks

2004-02-22 16:50 UTC-0800 Brian Hays <bhays@abacuslaw.com>
  * contrib/rdd_ads/ads1.c
     Imported fixes from Harbour :
   2004-02-19 12:48 UTC-0800 Luis Krause Mantilla <lkrausem /*at*/ shaw /*dot*/ ca>
      * contrib/rdd_ads/ads1.c
      ! adsSeek() now raises a runtime error 1201 if no index is active
      ! adsOrderListAdd() sets order to 0 if an invalid or non-existent tag is provided
         The above two were added to keep Clipper compatibility
      + Added 5th param to commonError() in order to provide uiFlags, like other RDD's

2004-02-22 16:38 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/rtl/hbxml.c
    ! Fixed memory leaks.
    % Optimized out hb_itemNew()

2004-02-22 04:10 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/rdd/dbcmd.c
    % More optimization out usage of hb_itemNew()
    ! fix unreleased memory block on unsupported yet DBRECORDINFO()

2004-02-22 03:10 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/rdd/dbcmd.c
    % Optimized out usage of hb_itemNew()

  * source/rtl/direct.c
    ! return value was not initialized before filespec is found and this causes
      GPF when filespec is not found. Fixed.

2004-02-21 09:07 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/rtl/regex.c
    ! Fixed few memory leaks.
    % Optimized out hb_itemNew()

  * tests/tstregex.prg
    * Minor improvement to display.

2004-02-21 21:45 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/rtl/direct.c
    % Optimized out usage of hb_itemNew()

  * source/rtl/trim.c
    % Optimized by :
      * bypassing HB_IS_COMPLEX checking because parameter passed is always
        string type.
      * trim functions now completely using their own static function and
        directly utilizing members of PHB_ITEM. They should be faster now.

  * contrib/unicode/hbcc.prg
  * contrib/unicode/hbcu.c
  * contrib/unicode/hbcx.c
  * contrib/unicode/hbcy.c
    % Optimized out usage of hb_itemNew()

2004-02-21 09:00 UTC-0300 Luiz Rafael Culik <culikr@brturbo.com>
  * utils/hbmake/hbmake.prg
    ! set target name to make file name

2004-02-21 10:02 UTC+0100 Giancarlo Niccolai <gc [at] niccolai [dot] ws>
  * source/vm/errorapi.c
    * some "spaces" around

  * source/vm/hbi18n.c
    ! fixed memory leaks.

  * source/vm/hvm.c
    * Added some tracelogs in hb_vmQuit()

  * source/vm/memvars.c
    * Added tracelogs in MT functions

  * source/vm/thread.c
    * Added tracelogs in MT functions
    ! fixed some memory leaks in main thread's stack.

2004-02-20 22:13 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/vm/hash.c
    ! Fixed remaining memory leaks.

  * source/vm/hvm.c
    ! Fixed remaining memory leaks related to hash operations and pseudo methods of Hash objects.

  /* tests\has.prg and tests/hashmas.prg perform without any leak. :-) */

2004-02-20 21:50 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/vm/hash.c
    ! Fixed memory leak in HB_FUNC( HCLONE )

  * source/vm/hvm.c
    ! Fixed memory leak in :Keys() and :Values() pseudo methods of Hash objects.

2004-02-20 21:16 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/vm/hash.c
    ! Fixed memory leaks in HB_FUNC( HGETKEYS ) and HB_FUNC( HGETVALUES ) (few more are still pending)

2004-02-20 21:08 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/vm/hash.c
    ! Fixed memory leak in HB_FUNC( HCLONE ) (few more are still pending)

2004-02-20 20:49 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * include/hbapi.h
  * source/vm/garbage.c
    + Added paramater bForce to hb_gcCollectAll()

  * source/rtl/hbserv.c
  * source/rtl/idle.c
    * Changed calls of hb_gcCollectAll() to hb_gcCollectAll( FALSE )

  * source/vm/hvm.c
    * Changed call of hb_gcCollectAll() to hb_gcCollectAll( TRUE ) to force collection
      on app termination even if collection is not justified - to avoid false warnings
      of memory leaks.

  * source/vm/hash.c
    ! Fixed memory leak (few more are still pending).

  * source/vm/classes.c
    - Removed outdated comments.

2004-02-21 09:30 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/rtl/trim.c
    ! minor changes on function linkage.

2004-02-21 08:40 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/vm/hvm.c
    ! changes to make return type Clipper compatible if parameter passed
      is of a memo type.

      /*
      I am not sure if I am bringing a Clipper "bug" here.
      */

2004-02-21 07:30 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/rtl/trim.c
    ! changes to make return type Clipper compatible

2004-02-20 14:37 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * contrib/libct/ctc.c
  * contrib/rdd_ads/ads1.c
  * source/rdd/dbcmd.c
  * source/rdd/dbf1.c
  * source/rdd/dbfcdx/dbfcdx1.c
  * source/rdd/dbfdbt/dbfdbt1.c
  * source/rdd/dbffpt/dbffpt1.c
  * source/rdd/dbfntx/dbfntx1.c
  * source/rtl/math.c
  * source/rtl/pplib.c
  * source/vm/memvars.c
    - Replaced hb_errRelease( pError ) with faster hb_itemRelease( pError )

  * source/vm/errorapi.c
    - Removed redundant and inefficent hb_errRelease()
    ! Fixed memory leaks.
    % Various optimizations.

  * source/vm/hvm.c
    ! Fixed memory leak in hb_vmPopAlias().
    * Renamed s_hb_vmClassError() to hb_vmClassError()
    ! Fixed memory leak and optimized hb_vmClassError()

2004-02-20  1:59 UTC-0800 Augusto Infante <august@winbuilt.com>
   * source/rtl/tget.prg
     * commented out line #357 //   if ::HasFocus
       due to an Argument error conditional ERROR BASE 1066
       The line shows // TODO: Delete this line if the "if ::hasfocus" in         ::Picture  is correct.
        It looks like somebody forgot about it ?

2004-02-20 11:50 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
   * contrib/Whoo/source/controls.prg
     * Begin revision of message handling.

   * source/vm/arrayshb.c
     * Fixed minor typo.

2004-02-21 02:15 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/rtl/fparse.c
    % Optimized out usage of hb_itemNew()

  * source/vm/fm.c
    ! minor correction to itteration when writing fm.log

  * contrib/xhwgui/source/hbrowse.prg
    ! kill warning on constant redefinition

2004-02-20 11:09 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/vm/arrayshb.c
    ! Fixed memory leak in C Structure support.
    % Few optimizations in C Structure support.
      /* There are few more obvious optimizations to be done ASAP. */

2004-02-20 10:31 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/vm/memvars.c
    * Removed dependancy on DEBUG_MEMORY_LEAKS #define.

  * source/vm/hvm.c
    * Replaced dependancy on DEBUG_MEMORY_LEAKS #define eith a R/T check of hb_xquery( HB_MEM_USEDMAX ).

  /*
     Now Memory Leaks will always be reported if fm.c is compiled with HH_FM_STATISTICS defined.
     No other source needs to be recompiled to enable complete memory statistics.
   */

2004-02-20 09:20 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/rtl/memofile.c
    ! Fixed to close file handle when file is empty.

2004-02-20 08:58 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/rtl/round.c
    % Optimized out usage of hb_itemNew() and hb_itemRelease()
    ! Fixed a memory leak.

2004-02-20 14:53 UTC+0100 Giancarlo Niccolai <gc [at] niccolai [dot] ws>
  * source/rtl/gtxvt/gtxvt.c
    ! GT window now appares in the middle of the screen in every WM.

2004-02-20 13:55 UTC+0100 Przemyslaw Czerpak <druzus@polbox.com>
  * xharbour/source/rtl/filesys.c
   ! some \ in include changed to /

  * xharbour/source/rtl/soundex.c
   * clean C warning

  * xharbour/source/vm/errorapi.c
   * clear memory leak

  * xharbour/source/vm/itemapi.c
   * some small fixes for Clipper compatibility

2004-02-20 04:00 UTC-0500 Paul Tucker <ptucker@sympatico.ca>
  * makallvc.bat
  * makallbc.bat
    + contrib/xhwgui

2004-02-19 18:33 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/vm/memvars.c
    + Added DEBUG_MEMORY_LEAK support to hb_memvarValueDecGarbageRef()

  * source/rdd/dbcmd.c
    % Various optimizations.

2004-02-20 05:35 UTC+0300 Phil Krylov <phil@newstar.rinet.ru>
  * Merged in some Harbour debugger updates by Ryszard Glab:
    + source/debug/dbgbrwsr.prg
      + New TDbgBrowser class which inherits from TBrowse.
    * source/debug/Makefile
    * hrbdll.bc
    * hrbdll.vc
    * makefile.bc
    * makefile.nt
    * makefile.vc
      + Added dbgbrwsr.prg.
    * source/debug/dbgmenu.prg
    * source/debug/dbgtwin.prg
    * source/debug/debugger.prg
    * source/debug/tbrwtext.prg
      + Added "Run at startup" option. If it's enabled then the program
        being debugged runs until ALTD() is called (the default option).
        If it's disabled the debugger shows up at the first code line
        which has debug info. The option is stored in the intialization
        file (init.cld) as 'Options NoRunAtStartup'.
      * Fixed more display/refreshing issues.
      * Fixed quitting the debugger.
    * source/vm/hvm.c
      * Call hb_vmDebugEndProc() before the eval stack is cleaned. This
        allows to handle INIT/EXIT procedures correctly.

2004-02-20 05:15 UTC+0300 Phil Krylov <phil@newstar.rinet.ru>
  * contrib/libct/pack.c
    * A cosmetic modification.

2004-02-20 07:30 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/rtl/achoice.prg
    ! fixes on initialization of row/col when initial item is not 1.

2004-02-19 16:45 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/vm/garbage.c
    % Disabled cleanup functions in hb_gcReleaseAll()

2004-02-19 16:26 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/vm/classes.c
    % Optimized out hb_itemParam(), hb_itemNew() and hb_itemRelease()
    ! Fixed memory leak in one HB_TRACE() call.

  * source/vm/thread.c
  * source/vm/estack.c
    * Refined reset of hb_stack members on freeing.

  * source/vm/hvm.c
  * source/vm/memvars.c
    + Added support for DEBUG_MEMORY_LEAKS, when defined hb_gcAll() will be used
      instead oh hb_gcReleaseAll() allowing to catch memory leaks.

  * tests/pp.prg
    * Minor correction in PP_Locals()

  * tests/ppclass.prg
    - Removed redundant #include

2004-02-20 00:47 UTC+0100 Giancarlo Niccolai <gc [at] niccolai [dot] ws>
  * source/rtl/gtxvt/gtxvt.c
  * source/rtl/gtxvt/gtxvt.h
    + better support for GTInfo(); font setting needs still some finetuning.

  * tests/gtinfo.prg
    * better layout

2004-02-20 03:55 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/vm/itemapi.c
    * minor changes to hb_itemStr() for Clipper compatibility

2004-02-20 01:20 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/compiler/harbour.c
  * source/compiler/harbour.slx
    ! move illegal character verification to lexer

2004-02-19 20:30 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/compiler/harbour.c
    ! avoid the followings from receiving illegal characters:
      * announce            ie. ANNOUNCE AB
      * aliased variable    ie. MEMVAR->AB
      * symbol-to-push      ie. AB->MYFIELD
      * undeclared variable ie. AB = 1

2004-02-19 00:03 UTC-0600 Vicente Guerra <vicente@guerra.com.mx>
  * source/rtl/tbrowse.prg
     ! Initialization in ::ForceStable counts lines going bottom.

2004-02-19 01:45 UTC-0300 Marcelo Lombardo <lombardo@uol.com.br>
  * source/vm/classes.c
     + Added hb_objSendSymbol()

2004-02-19 20:26 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/pp/ppcore.c
    ! Fixed and optimized detection of [] context in NextName()

2004-02-19 09:50 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/rtl/achoice.prg
    ! initialize position at nTop, nLeft after painting.

2004-02-18 23:00 UTC-0300 Luiz Rafael Culik <culikr@brturbo.com>
  + contrib/xhwgui/*
    ! added hwgui sources into xharbour contrib dir

2004-02-18 22:40 UTC+0100 Przemyslaw Czerpak <druzus@polbox.com>
  * xharbour/source/rdd/dbfcdx/dbfcdx1.c
    * respect SET STRICTREAD flag in indexing

  * xharbour/source/rdd/dbf1.c
    * SELF_GOCOLD in hb_dbfSort added
    * removed limit of record numbers hb_dbfSkipRaw

  * xharbour/tests/keycodes.prg
    * new mouse keycodes added

  * xharbour/source/rtl/run.c
    + support for __RUN in OpenWatcom

  * xharbour/bin/hb-func.sh
  * xharbour/bin/postinst.sh
    * basic changes for xhb* scripts for DJGPP (not ready yet)

  * xharbour/source/rtl/filestat.c
    * casting for OpenWatcom

  * xharbour/source/rtl/filesys.c
    * DOS error codes fixes for OpenWatcom

  * xharbour/source/rtl/gt_tpl/gt_tpl.c
  * xharbour/source/rtl/gtcrs/gtcrs.c
  * xharbour/source/rtl/gtsln/gtsln.c
  * xharbour/source/rtl/gtxvt/gtxvt.c
    * changes to using the new macro HB_PRAGMA_STARTUP

2004-02-19 03:15 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/compiler/harbour.c
    + static void hb_compCheckIllegalChar( char * ) to verify illegal chars.
    ! do not accept EXTERNS, FUNCTION CALLS, FUNCTION NAMES containing
      illegal characters.

2004-02-18 17:50 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * include/hberrors.h
    ! minor correction on error code definition
      HB_COMP_ERR_CREATE_HIL : 33 -> 60
    + new error code HB_COMP_ERR_ILLEGAL_CHARACTER
      This is to generate compiling error when variable name contains
      non-alpha-numeric ( except underscore ).

  * source/compiler/hbgenerr.c
  * source/compiler/harbour.c
    + add error handler for illegal character in variable names.
      This is however is guarded by HB_COMMON_VARNAME_OFF define. Those
      who wish to have xHarbour accepts non-alphanum characters as parts of
      variable name can turn off this checking routine by defining
      HB_COMMON_VARNAME_OFF when building harbour.exe.

  + tests/tstlegal.prg
    ! test program for legal/illegal characters in variable names in
      accordance with the feature described above. This file demonstrates
      why the above changes are taken up.

  * source/rtl/fparse.c
    ! optimization

  * include/hbapi.h
  * source/rtl/console.c
    ! exporting: hb_conNewLine() and hb_conOutErr()

2004-02-18 01:00 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/rtl/tgetint.prg
    ! Fixed __GetA() to create a SetGet block which returns the base array,
      and ignores any passed value - Clipper compatability.

  * source/rtl/tget.prg
    ! Fixed :VarGet() and :VarPut() methods to utilize :SubScript if applicable.
    - Removed redundant :Block() SETGET method, renamed :bBlock to :Block
      and removed its PROTECTED Scope.

2004-02-18 01:30 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * include/hbinit.h
    + new macro HB_PRAGMA_STARTUP

  * source/rdd/dbf1.c
  * source/rdd/dbfntx/dbfntx1.c
  * source/rdd/dbfcdx/dbfcdx1.c
  * source/compiler/genc.c
  * source/rtl/gtcgi/gtcgi.c
  * source/rtl/gtcgi/gtpca.c
  * source/rtl/gtstd/gtstd.c
  * source/rtl/gtwin/gtwin.c
  * source/rtl/gtwvt/gtwvt.c
  * source/rtl/gtalleg/gtalleg.c
  * source/rtl/gtnul/gtnul.c
    ! changes to using the new macro HB_PRAGMA_STARTUP

2004-02-17 19:20 UTC+0100 Przemyslaw Czerpak <druzus@polbox.com>
  * xharbour/source/rdd/dbfntx/dbfntx1.c
    ! fixed bug I introduced recently, leading spaces in numbers
      should be replaced by 0 in NTX

2004-02-17 02:00 UTC-0500 Paul Tucker <ptucker@sympatico.ca>
  * contrib/rdd_ads/adsfunc.c
    * BYTE -> UNSIGNED8 (just to be consistant)

2004-02-16 18:40 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/rtl/teditor.prg
    ! Fixed infinite loop when line length argument is <= 0

2004-02-16 14:00 UTC-0300 Rodrigo Moreno <rodrigo_moreno@yahoo.com>
  * contrib/pgsql
    * Minor changes, ISCHAR TO ISCHARACTER, see contrib/plgsql/Changelog

2004-02-15 21:12 UTC+0100 Giancarlo Niccolai <gc [at] niccolai [dot] ws>
  + doc/gtinfo.txt
    + Some embrional documentation about the GTINFO system; will be merged
      with GTAPI to form a unique document about GT system.

  * include/gtinfo.ch
    + Some defintions, comments. Capability to read desktop size in characters.

  * source/rtl/gtwvt/gtwvt.c
    + GTINFO compliancy.

  * tests/gtinfo.prg
    * Layout/indentation.

2004-02-16 19:30 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * include/hbapi.h
  * source/common/hbgete.c
    ! exporting hb_getenv()

  * source/rtl/gtcgi/gtcgi.c
  * source/rtl/gtstd/gtstd.c
  * source/rtl/gtwin/gtwin.c
  * source/rtl/gtwvt/gtwvt.c
  * source/rtl/gtalleg/gtalleg.c
    ! fixes for compilation under Borland CPP with -DHB_MULTI_GT

2004-02-16 02:00 UTC-0500 Paul Tucker <ptucker@sympatico.ca>
  * hrbdll.bc
  * hrbdll.vc
    + source/rtl/fparse.c
    + source/rtl/gtgraph.c

2004-02-16 01:45 UTC-0500 Paul Tucker <ptucker@sympatico.ca>
  * contrib/rdd_ads/ads1.c
    - unused nvalue
  * contrib/rdd_ads/adsfunc.c
    * correct casts

2004-02-16 01:35 UTC-0500 Paul Tucker <ptucker@sympatico.ca>
  * makefile.nt
  * makefile.vc
    * minor reorder
  * source/vm/macro.c
    * cast on xgrab call

2004-02-15 20:10 UTC-0800 Brian Hays <bhays@abacuslaw.com>
  * contrib/rdd_ads/adsfunc.c
    * moved adsGetNumActiveLinks() inside #ifdef ADS_REQUIRE_VERSION6

  * contrib/rdd_ads/ads1.c
    * fixed pointer overflow when freeing a workarea after reading
      a timestamp value.

    * Set minimum buffer to
         pArea->maxFieldLen = 24
      to accommodate extended types whose lengths may be 24 (timestamps
      can include 3 digits for milliseconds).
      Removed redundant call to server for all numerics.

    * added these fixes by Mindaugas Kavaliauskas:
      * adsDeleted() comment was incorrect and eof handling is cleaner now.
      * OrdSetFocus("") did not set order to 0

      * Bug: DBORDERINFO(DBOI_SCOPETOP), DBORDERINFO(DBOI_SCOPEBOTTOM)
        returned "" instead of NIL if NO INDEX is selected.

      * Bug: DBORDERINFO(DBOI_SCOPETOP), DBORDERINFO(DBOI_SCOPEBOTTOM) returns
        invalid value on date indexes if CDX or ADT indexes used

      * Bug: ORDSETSCOPE() does not work if index key contains CHR(0)
         BH: I did not test this one, though it seemed a simple and correct fix.

      * OrdKeyCount() was very slow because it counted records using skip
        if a scope was set. If no filter is set, this could be optimized.
        Now if no filter is used it is much faster!


2004-02-15 20:10 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * include/hbexprop.h
    * Corrected a typo in a comment.

  * source/vm/macro.c
    ! Fixed hb_macroPushSymbol() to trim macro string.

  * include/hbexprb.c
    ! Optimized hb_compExprUseRTVariable() to not require R/T Macro support.
      /* PUBLIC|PRIVATE &Macro|&Macro.Complex should be much faster. */

2004-02-15 16:45 UTC-0800 Brian Hays <bhays@abacuslaw.com>
  * contrib/rdd_ads/adsfunc.c
     + AdsGetServerTime (by Toninho)
     ! Removed comments around ADS_REFRESHCOUNT  from
         AdsGetRecordCount( pArea->hTable, ADS_IGNOREFILTERS | ADS_REFRESHCOUNT, pRecCount );
       This flag MUST be in this call or unacceptably
       wrong values are returned from lastrec().

     + AdsRestructureTable()
        wrapper to add/edit/delete fields in a table

     + AdsCopyTableContents from NG post by Klaas den Dekker (Thanks!)

     + Added 3 ADS function wrappers by Luis Krause Mantilla (Thanks!)
                                        from Harbour cvs:
        adsGetNumOpenTables()
        adsShowError()
        adsGetNumActiveLinks()

  * contrib/rdd_ads/rddads.h
      + added prototypes for AdsGetFieldRaw AdsSetFieldRaw.
         I think it works better for additions to go here rather
         than in ace.h which should stay as close to the
         Extended Systems, Inc.  original as possible since
         it periodically gets updated.

2004-02-15 20:00 UTC-0300 Luiz Rafael Culik <culikr@uol.com.br>
  * contrib/libct/files.c
    ! Added Code to relese memory from fname variable if is valid

2004-02-15 14:52 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/vm/extend.c
    + Added missing hb_retnll( LONGLONG llNumber )

2004-02-15 19:04 UTC-0300 Luiz Rafael Culik <culikr@uol.com.br>
  * contrib/libct/files.c
    ! minor fix to filedelete
  * Changelog
    ! corrected entry

2004-02-15 14:01 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/vm/eval.c
  * source/vm/thread.c
    + Added few missing initializations of asSymbol.uiSuperClass

  * source/pp/ppcore.c
    * Corrected execution flow to avoid usage of uninitialized State.

  * source/rtl/tget.prg
    ! Fixed Picture to call ParsePict() even if the GET Variable is NIL.

2004-02-16 03:20 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/rtl/val.c
  * source/vm/hvm.c
    - remove -0.0 hacks

  * utils/hbtest/rt_math.prg
    + add a line to test -0.0 case

  * contrib/libct/files.c
    ! fixes for MSVC

2004-02-16 09:15 UTC+1200 Peter Rees <peter(AT)rees.co.nz>
  * /contrib/mysql/tmysql.prg
    * METHOD GetBlankRow( loRow ) CLASS TMySQLTable
      - set default value of "C" type field to SPACE(FIELD_LENGTH)

2004-02-15 21:12 UTC+0100 Giancarlo Niccolai <gc@niccolai.ws>
  * source/rtl/radiobtn.prg
    ! Added function RadioButton() beside RadioButto() under HB_EXTENSION

  * tests/tstchbx.prg
    ! RadioButto() changed in RadioButton()

2004-02-15 20:13 UTC+0100 Giancarlo Niccolai <gc@niccolai.ws>
  * source/rtl/checkbox.prg
    ! If the checkbox had no caption, hittest would have crashed the
      application.

  * source/rtl/gtwvt/gtwvt.c
    ! Some errors in returning latest mouse wheel defines

  * tests/tstchbx.prg
    * enabled mouse input

2004-02-15 16:58 UTC+0100 Giancarlo Niccolai <gc@niccolai.ws>
  * source/rtl/inkey.c
    + Guarded by HB_EXTENSION, __Keyboard() (and thus KEYBOARD PP directive)
      now accepts a numeric as a raw Inkey code; this allow to i.e. queue
      mouse events (or other kind of events), and also unicode characters
      in future.

2004-02-15 09:00 UTC-0300 Luiz Rafael Culik <culikr@brturbo.com>
  * contrib/libct/files.c
    ! fixed to FILEDELETE function provided by Eduardo(eduardo@modalsistems.com.br
  * source/rtl/treport.prg
    ! fixes to Report from commands provided by  Gianlluca( info@areainformatica.com)
  * source/rtl/teditor.prg
    ! Removed LEFT Arrow key as exit for memoedit on view mode Reported by Millan Mehta

2004-02-15 10:10 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  + source/rtl/fparse.c
    * delimited text file parser.
      Syntax: FParse( cFile, cDelimiter )
      Return: Arrays

  + tests/fparse.prg
    * file parser testing program

  + tests/test.csv
    * sample of a comma delimited file

  * makefile.bc
  * makefile.vc
  * makefile.nt
    + add fparse.c file dependency

2004-02-14 23:50 UTC+0100 Przemyslaw Czerpak <druzus@polbox.com>
  * xharbour/source/rdd/dbfcdx/dbfcdx1.c
    * fixed bug when seek last was used in empty index.

2004-02-14 20:53 UTC-0300 Luiz Rafael Culik Guimares <culikr@brturbo.com>
  * contrib/hbzlib/zipnew.cpp
    * long -> LONG

2004-02-14 05:10 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * include/hbapifs.h
  * include/hbapi.h
  * include/hbapicdp.h
  * include/hbapiitm.h
  * include/hbdate.h
  * include/hbvm.h
  * include/hbvmpub.h
  * include/hbmacro.h
    ! standardize typedefs according to xHarbour macros

2004-02-16 04:00 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/vm/arrays.c
  * source/vm/arrayshb.c
  * source/vm/classes.c
  * source/vm/dynlibhb.c
  * source/vm/dynsym.c
  * source/vm/extend.c
  * source/vm/hash.c
  * source/vm/hvm.c
  * source/vm/inet.c
  * source/vm/itemapi.c
  * source/vm/macro.c
  * source/vm/memvars.c
  * source/vm/runner.c
  * source/vm/thread.c
  * source/rtl/abs.c
  * source/rtl/binnum.c
  * source/rtl/datec.c
  * source/rtl/dates.c
  * source/rtl/dateshb.c
  * source/rtl/diskspac.c
  * source/rtl/filesys.c
  * source/rtl/hbbitf.c
  * source/rtl/hbchksum.c
  * source/rtl/hbcomprs.c
  * source/rtl/hbcrc32.c
  * source/rtl/hbcrypt.c
  * source/rtl/hbffind.c
  * source/rtl/hbhex2n.c
  * source/rtl/hbrandom.c
  * source/rtl/hbserv.c
  * source/rtl/hbsrlraw.c
  * source/rtl/left.c
  * source/rtl/minmax.c
  * source/rtl/mod.c
  * source/rtl/padc.c
  * source/rtl/padl.c
  * source/rtl/padr.c
  * source/rtl/rat.c
  * source/rtl/readline.c
  * source/rtl/replic.c
  * source/rtl/right.c
  * source/rtl/space.c
  * source/rtl/str.c
  * source/rtl/strtran.c
  * source/rtl/substr.c
  * source/rtl/win32ole.prg
  * source/rtl/gtwvt/gtwvt.c
    ! standardize long -> LONG

2004-02-15 02:45 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/vm/thread.c
    ! minor correction on define: _MSVC_VER => _MSC_VER

  * source/vm/fm.c
    + add routine to create/append fm.log file _ONLY_ upon the occurence
      of unreleased memory block.

  + tests/tstfmlog.prg
    ! test program for fm.log

2004-02-14 14:41 UTC-0300 Luiz Rafael Culik Guimares <culikr@brturbo.com>
  * contrib/hbzlib/zipnew.cpp
  * contrib/hbzlib/zipcomp.cpp
    ! Corrected some variable types (ie ULONG uiCount to ULONG ulCount) and some
      code cleanup
  * contrib/hbzlib/include/hbzip2.h
    ! minor update due change above

2004-02-14 11:27 UTC-0300 Luiz Rafael Culik Guimares <culikr@brturbo.com>
  * ChangeLog
    ! Renamed to ChangeLog.018 and started an new one
  * utils/hbtest/Makefile
    ! added missing rt_ccall.prg
  * contrib/hbzlib/Makefile
    !Removed unneeded dependencies
