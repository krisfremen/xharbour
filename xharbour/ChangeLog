/*
 * $Id: ChangeLog,v 1.6570 2009/08/30 18:43:07 lculik Exp $
 */

/* Use this format for the entry headers:
   YYYY-MM-DD HH:MM UTC[-|+]hhmm Your Full Name <your_email@address>
   For example:
   2002-12-01 23:12 UTC+0100 Foo Bar <foo.bar@foobar.org>
*/

2009-09-01 10:05 UTC-0430 Ron Pinkas <ron.pinkas/at/xharbour.com>
   * source/vm/hvm.c
     ! Corrected #if 1 to #if 0, and added explnataion comment,
       why 1 + 'a' is not at all same as 'a' + 1.

   * source/vm/arrays.c
     * Minor typo, return statement was misplaced.
   * source/vm/arrayshb.c
     ! Corrected aDel() to not shrink the array unless an element was truely deleted.

2009-08-30 15:40 UTC-0300 Luiz Rafael Culik <luiz at xharbour.com.br>
  * contrib/gtwvw/gtwvw.c
    ! minor fix to hb_gt_wvwLoadPicture, thanks for mario simoes for reporting

2009-08-30 12:00 UTC-0300 Luiz Rafael Culik <luiz at xharbour.com.br>
  * contrib/gtwvw/gtwvw.c
    ! added few typecasted thanks to jose claudio by reporting
    ! move more HB_FUNC to wvwfuncs.c
    ! this also should fix gtwvw inkey slowness
    ! callback functions changed
  * contrib/gtwvw/hbgtwvw.h
    ! added some new prototypes
  * contrib/gtwvw/wvwfuncs.c
    ! added the functions removed from gtwvw.c

2009-08-30 14:58 UTC+0200 Enrico Maria Giordano <e.m.giordano@emagsoftware.it>
  * source\tip\utils.c
    - Removed unused initialization values for minutes and hours variables in
      function HB_FUNC( TIP_TIMESTAMP )

2009-08-30 14:22 UTC+0300 Phil Krylov <phil@newstar.rinet.ru>
  * source/vm/itemapi.c
    ! Finalized fixing hb_itemUnShareString() copied from Harbour as is. It
      did not update the string refcounter.

2009-08-30 00:51 UTC+0300 Phil Krylov <phil@newstar.rinet.ru>
  * contrib/gtwvg/gtwvg.c
  * source/rdd/dbfntx/dbfntx1.c
  * source/rdd/hbsix/sxfname.c
  * source/rdd/hsx/hsx.c
  * source/rtl/bkgtsks.c
  * source/rtl/console.c
  * source/rtl/dateshb.c
  * source/rtl/fstemp.c
  * source/rtl/gtapi.c
  * source/rtl/hbgtcore.c
  * source/rtl/idle.c
  * source/rtl/inkey.c
  * source/rtl/mlcfunc.c
  * source/rtl/readexit.c
  * source/rtl/readins.c
  * source/rtl/setcolor.c
  * source/rtl/str.c
  * source/rtl/transfrm.c
  * source/rtl/txtline.c
  * source/rtl/gtwvt/gtwvt.c
  * source/rtl/gtxvt/gtxvt.c
  * source/vm/runner.c
  * tests/misc/date.c
    * Replaced direct hb_set struct access by hb_set*() function calls.
    ! Fixed SETCOLOR() to return old color value, not new.
    % Some small optimization in HB_READLINE().
  (mostly borrowed from Harbour code by Przemyslaw Czerpak and Viktor Szakats).


2009-08-30 00:25 UTC+0300 Phil Krylov <phil@newstar.rinet.ru>
  * source/tip/Makefile
    ! Added sendmail.prg compilation for GNU Makefiles.
  * source/tip/sendmail.prg
    ! Removed unused variables.

2009-08-28 11:15 UTC-0300 Luiz Rafael Culik <luiz at xharbour.com.br>
   * source/tip/mail.prg
     source/tip/sendmail.prg
     ! Fixed attachement when parameter was character. reported by
       Robert Campsmith  on comp.lang.xharbour
     ! Enhaced the attachfile() method from  tipmail class

2009-08-27 20:53 UTC-0430 Ron Pinkas <ron.pinkas/at/xharbour.com>
   * makefile.bc
   * makefile.vc
     * Only build tipssl.lib if HB_DIR_OPENSSL is set
       /*
          NOTE: Seems the none of the other make file
          are updated to build tipssl.lib at all!!!
        */
   * mdir.bat
     + Added auto detection of OpenSSL

   * source/rdd/dbcmd.c
     * Hack to __DBCOPY() to explicitly prefix target file with the current path
       to to avoid inadvertent override of file in the SET PATH folder.

       /*
          NOTE: RDD authors please review if this is the correct place for such hack.
        */

2009-08-27 12:00 UTC+0700 Andi Jahja <xharbour/AT/telkom/net/id>
  * source/common/hbver.c
    + add compiler version for Embarcadero 6.20 (a.k.a. RAD Studio 2010)

2009-08-26 13:05 UTC-0300 Luiz Rafael Culik <luiz at xharbour.com.br>
  ! contrib/gtwvw/gtwvw.c
    ! fixed wrong color on status bar
    ! fixed some problems with inkey

2009-08-26 12:43 UTC+0300 Phil Krylov <phil@newstar.rinet.ru>
  * ChangeLog
    ! Restored my and Augusto's ChangeLog entries from 19-21 August, which
      were accidentally deleted by Luiz.

2009-08-24 19:50 UTC-0300 Eduardo Fernandes <modalsist@yahoo.com.br>
  * source/tip/thtml.prg
    ! fixed ansitohtml() to parse "&" char when alone.
      f.e. ? oemtohtml("&")

2009-08-24 15:02 UTC-0300 Luiz Rafael Culik <luiz at xharbour.com.br>
  ! contrib/gtwvw/gtwvw.c
    ! fix to return correct row/col from current window. fix provided by Cristian
  ! utils/hbmake/hbmake.prg
    ! minor fix on generating harbour.cfg under msvc mode

2009-08-24 15:00 UTC-0300 Luiz Rafael Culik <luiz at xharbour.com.br>
  ! contrib/gtwvw/gtwvw.c
    ! minor fix on line 3991 ( commented return 0 ) to break;

2009-08-24 09:30 UTC-0300 Luiz Rafael Culik <luiz at xharbour.com.br>
  ! contrib/gtwvw/gtwvw.c
  ! contrib/gtwvw/hbgtwvw.h
   minor ajust to typecast. reported on xharbour developer list and xharbour portuguese
   news by reynaldo henrique

2009-08-23 19:50 UTC-0300 Luiz Rafael Culik <luiz at xharbour.com.br>
  ! contrib/gtwvw/gtwvw.c
  ! contrib/gtwvw/hbgtwvw.h
    !updated to work with xharbour new gt
    ported to work with new gt by Cristiam Azambuja <cristiam@datacempro.com.br>
        and Marson de Paula <marson@datacempro.com.br>
    reformating by Luiz Rafael Culik (typecasts for msvc, as also move HB_FUNCS
    by category into new .c files )

  + contrib/gtwvw/wvwdraw.c
  + contrib/gtwvw/wvwmenu.c
  + contrib/gtwvw/wvwtbar.c
  + contrib/gtwvw/wvwstbar.c
  + contrib/gtwvw/wvwpush.c
  + contrib/gtwvw/wvwcheck.c
  + contrib/gtwvw/wvwedit.c
  + contrib/gtwvw/wvwfuncs.c
    * moved varios HB_FUNC to separate file according to it functionality
  ! makefile.bc
    makefile.vc
    makefile.gc
    makefile.wc
    contrib.pc
    !updated to compile gtwvw

2009-08-21 19:44 UTC-0800 Augusto Infante <augusto.infante@xharbour.com>
  * contrib/rdd_ads/adsfunc.c
    * ensured byRef error text is an empty string if there is no error
      in AdsGetLastError. Before, it was returning 601 bytes of garbage.

2009-08-20 03:27 UTC+0300 Phil Krylov <phil@newstar.rinet.ru>
  * source/rdd/wacore.c
    * Translated Walter's comments from Spanish to English. Both are not my
      native languages, so please check it.

2009-08-20 03:18 UTC+0300 Phil Krylov <phil@newstar.rinet.ru>
  * include/hbxml.h
  * source/rtl/hbxml.c
    ! Fixed to retrieve file handles with hb_itemGetNInt() and hb_parnint(),
      instead of long versions.
    % hb_itemRelease( hb_itemReturn() ) -> hb_itemReturnRelease()
    * isspace() -> HB_ISSPACE(). HB_ISSPACE() should be
      revised in the future if Unicode is used, but until
      then this is fine here.
    * FHANDLE -> HB_FHANDLE
    (by Viktor Szakats, borrowed from Harbour)
    * Updated to use hb_itemGetWriteCL().
    * use const char * instead of char * in places which should be marked
      as const
    * cleanup errors in strict ANSI C compilation
    (by Przemyslaw Czerpak, borrowed from Harbour)

2009-08-20 02:38 UTC+0300 Phil Krylov <phil@newstar.rinet.ru>
  * contrib/hbmzip/hbmzip.c
  * source/rtl/cdpapi.c
  * source/rtl/hbcomprs.c
  * source/rtl/philes.c
  * source/rtl/strpeek.c
  * include/hbapiitm.h
  * source/vm/itemapi.c
    + added new function:
         BOOL hb_itemGetWriteCL( PHB_ITEM pItem,
                                 char ** pszValue, ULONG * pulLen );
      which converts item string buffer to writable state to use with
      functions like FREAD() instead of hb_itemUnShare*()
    * updated other code to respect above modifications
  (by Przemyslaw Czerpak, borrowed from Harbour)
  * source/rtl/hbsrlraw.c
    * Updated to use hb_itemGetWriteCL().

2009-08-20 00:02 UTC+0300 Phil Krylov <phil@newstar.rinet.ru>
  * include/hbcompat.ch
    + added missing translation rules for MT functions for both Harbour
      and xHarbour sections.
    ! removed some old not longer valid translations
    (by Przemyslaw Czerpak, borrowed from Harbour)
    + Added INET and HASH function name conversion from
      Harbour to xhb.
    + Added translation for these functions:
      DATETIME(), HOUR(), MINUTE(), TTOS(), STOT(), TTOC(), CTOT()
    + Added cross mappings for xhb SETKEY().
    + Added HB_GETENV() <-> GETENV() conversions.
    + Added MEMOWRIT() translation for xhb sources.
    + Added i18n() compatibility translation.
    (by Viktor Szakats, borrowed from Harbour)

2009-08-19 21:01 UTC+0300 Phil Krylov <phil@newstar.rinet.ru>
  * source/rdd/workarea.c
    % A small optimization in hb_waAddField().
    ! keep EOF position synced in relation positioning
    * added small protection against releasing WA by user codeblock in
      EVALBLOCK() method
  (by Przemyslaw Czerpak, borrowed from Harbour)

2009-08-17 21:31 UTC+0300 Phil Krylov <phil@newstar.rinet.ru>
  * source/rtl/dirdrive.c
  * source/rtl/filesys.c
  * source/rtl/philes.c
  * source/rtl/philesx.c
    ! fixed CURDRIVE() and DISKNAME() to not return "A" in OS-es which
      does not use drive letters
    ! eliminated toupper()
    % minor cleanup and speed improvement
  (by Przemyslaw Czerpak, borrowed from Harbour)

2009-08-17 20:09 UTC+0300 Phil Krylov <phil@newstar.rinet.ru>
  * source/debug/tbrwtext.prg
    ! Bug fixed in Search() method (by Alexander Kresin, borrowed from
      Harbour).
    ! Fixed RTE on deleting the last tracepoint.
  * ChangeLog
    ! Fixed typos in recent ChangeLog entries by Luiz.
  * ChangeLog.028
    ! Fixed Viktor's name in the ChangeLog.

2009-08-16 22:20 UTC-0300 Luiz Rafael Culik <luiz at xharbour.com.br>
  * source/tip/ftpcln.prg
    source/tip/popln.prg
    source/tip/smtpcln.prg
    minor fix to previus commit

2009-08-16 11:40 UTC-0300 Luiz Rafael Culik <luiz at xharbour.com.br>
  * source/tip/client.prg
    init ::nhandle as -1
  * source/tip/ftpcln.prg
    source/tip/popln.prg
    source/tip/smtpcln.prg
    ! added destructor to close trace file, if still open
  * source/tip/utils.c
    ! fixes to tip_timestamp provided by Klaus

2009-08-15 21:05 UTC+0700 Andi Jahja <xharbour/AT/telkom/net/id>
  * contrib/png/png.c
  * contrib/png/png.h
  * contrib/png/pngconf.h
  * contrib/png/pngerror.c
  * contrib/png/pngget.c
  * contrib/png/pngmem.c
  * contrib/png/pngpread.c
  * contrib/png/pngread.c
  * contrib/png/pngrio.c
  * contrib/png/pngrtran.c
  * contrib/png/pngrutil.c
  * contrib/png/pngset.c
  * contrib/png/pngtrans.c
  * contrib/png/pngwio.c
  * contrib/png/pngwrite.c
  * contrib/png/pngwtran.c
  * contrib/png/pngwutil.c
    ! updated to version 1.2.39

2009-08-11 10:30 UTC-0300 Eduardo Fernandes <modalsist@yahoo.com.br>
  * makefile.pc
    * commented "/alternatename" link flag. Needed only for PellesC 5.x

  * utils\hbmake\hbmake.prg
    * commented "/alternatename" link flag. Needed only for PellesC 5.x

2009-08-11 09:00 UTC-0300 Luiz Rafael Culik <luiz at xharbour.com.br>
  ! makefile.vc
    makefile.bc
    ! minor adjust to compile tipssl


2009-08-10 15:40 UTC-0300 Luiz Rafael Culik <luiz at xharbour.com.br>
  ! makefile.vc
    ! minor adjust
  ! contrib/tipssl/inetssl.c
    ! removed ssl_base64 function

2009-08-10 15:40 UTC-0300 Luiz Rafael Culik <luiz at xharbour.com.br>
  ! common.mak
  ! compile.mak
    makefile.bc
    makefile.vc
    ! changed to compile tipssl
  ! contrib/tipssl/sendmail.prg
  ! contrib/tipssl/smtpcln.prg
    ! minor change


2009-08-10 10:25 UTC-0300 Eduardo Fernandes <modalsist@yahoo.com.br>
  * source/rtl/achoice.prg
    ! fixed to treat K_ENTER posted by previous keyboard.
    ! fixed to abort on K_LEFT and K_RIGHT keystrokes.

2009-08-10 18:00 UTC+1200 Peter Rees <peter(AT)rees.co.nz>
  * source\rtl\win32prn.prg
    + added TextOutW and TextOutWAt methods to print UNICODE
      changed contributed by Michael Ang

2009-08-04 14:20 UTC-0300 Luiz Rafael Culik <luiz at xharbour.com.br>
  !common.mak
   makefile.bc
    !changed to compile tipssl
    set the HB_DIR_OPENSSL envar to openssl install directory
  ! Changelog
    ! Renamed to ChangeLog.029 and started an new One

  + contrib/tipssl/client.prg
  + contrib/tipssl/httpcln.prg
  + contrib/tipssl/mail.prg
  + contrib/tipssl/popcln.prg
  + contrib/tipssl/sendmail.prg
  + contrib/tipssl/smtpcln.prg
  + contrib/tipssl/inetssl.c
  + contrib/tipssl/inetssl.h
    * Added Code to support ssl connection for http/smtp/pop3

  + contrib/tipssl/Makefile
  + contrib/tipssl/test.prg
    * sample to desmostrate on how to use gmail ans yahoo server
    For windows, you need to install open ssl
    just install
    http://www.slproweb.com/download/Win32OpenSSL-0_9_8k.exe and
    http://www.microsoft.com/downloads/details.aspx?familyid=9B2DA534-3E03-4391-8A4D-074B9F2BC1BF
    To get certificates from an site is easy
    once openssl is instaled ( in my machine i've added v:\openssl\bin to my path envar do )
    openssl s_client -connect -showcerts
    for example
    to get yahoo pop3 certificate
    openssl s_client pop.mail.yahoo.com:995 -showcerts >2 2>&1 (to terminate prest CTRL+C
    open the 2 file
    copy all content between -----BEGIN CERTIFICATE-----/-----END CERTIFICATE----- inclusive
    this lines to one file ( if more then one occurence, create an file to each one
    save each file in openssl\bin\certs with .pem extension. in linux save the files to  /etc/ssl/certs

    open an dos shell
    under windows do

    go top openssl\bin\certs
    run openssl" x509 -hash -fingerprint -noout -in fileyousaved.pem
    copy fileyousave.pem to hash returned on command above
    example
    if you save the file as gmail.pem do
    V:\OpenSSL\bin\PEM>..\openssl x509 -hash -fingerprint -noout -in gmail.pem
    7f549ca4  <<---- NOTE this number
    SHA1 Fingerprint=51:21:45:CE:CE:99:19:87:7D:CE:3F:52:C0:31:0F:7E:FB:B4:6A:6F
    then copy gmail.pem to 7f549ca4.0
    under linux
    execute the c_rehash command













