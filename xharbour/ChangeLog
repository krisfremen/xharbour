/*
 * $Id: ChangeLog,v 1.2753 2004/04/05 13:09:54 srobert Exp $
 */

/* Use this format for the entry headers:
   YYYY-MM-DD HH:MM UTC[-|+]hhmm Your Full Name <your_email@address>
   For example:
   2002-12-01 23:12 UTC+0100 Foo Bar <foo.bar@foobar.org>
*/

2004-04-05 16:48 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * xharbour/source/rtl/fserror.c
    * ETXTBSY inside #ifdef ETXTBSY

  * xharbour/source/rtl/filesys.c
    * compilation fixes

  * xharbour/source/rtl/hbffind.c
    * use new error codes

2004-04-05 09:10 UTC-0500 Sylvain Robert (s.robert/at/videotron.ca)
  * xharbour/source/rtl/fserror.c
    * Put case ETXTBSY under #if defined( HB_OS_UNIX )

2004-04-05 13:34 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  + xharbour/source/rtl/fserror.c
    + I missed it in my previous commit

2004-04-05 13:32 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * xharbour/source/rtl/filesys.c
    ! BCC compilation fixed

2004-04-05 17:10 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/compiler/hbpcode.c
    - remmed: unused hb_compPrivateFind()
  * contrib/libct/files.c
    - remmed: unused osToHarbourMask()
  * source/rtl/gtwvt/gtwvt.v
    - remmed: unused hb_wvt_gtValidWindowSize()
  * contrib/libnf/n2color.c
    - remmed: unused _ftI2Color()
    ! fix inconsistent linkage : _ftGetColorStr()
  * contrib/unicode/hbc7.c
    ! fix inconsistent linkage : str2ue7()
  * contrib/unicode/hbcrpt128.c
    - removed unused variable: tmpKey
  * contrib/winprn/tprint.prg
    - remmed unused fucntions:
      DELETEOBJECT(),SELECTOBJECT(),SETTEXTCHARACTEREXTRA()

  * source/pp/pragma.c
  * source/pp/ppcore.c
    % code formatting, mainly change tabs->spaces and put singe-liner into {}

2004-04-05 04:38 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * xharbour/makefile.bc
  * xharbour/makefile.nt
  * xharbour/makefile.vc
  * xharbour/source/rtl/Makefile
    + fserror.c added

  * xharbour/source/rtl/diskspac.c
  * xharbour/source/rtl/disksphb.c
    * use current version hb_parc() instead of hb_parcx()

  * xharbour/include/hbdefs.h
    + hack for 64bit systems and [U]LONG_{MIN,MAX} definition

  * xharbour/include/hbapifs.h
    * new macro HB_WIN32_IO instead of X__WIN32__
      (X__WIN32__ is still working but I'll remove it soon)

  * xharbour/source/rtl/console.c
    * use HB_WIN32_IO instead of X__WIN32__
      Why we use it? Can someone who use Windows explain it?
      Doesn't DostoWinHandle() work?

  * xharbour/source/rtl/filesys.c
    * error codes changed. It's first part of changes and I expect
      that they could introduce temporary instability but it has to
      be done. I want to clean all sources and use WinAPI only and
      always when HB_WIN32_IO if set. In other case use compiler's API.
      Mixing WinAPI with C compiler can cause unexpected results and
      reduce portability - I think that Windows users will want to
      see WindowsCE port in the future. I need help from all developers
      especially Windows ones and other platform/compilers I don't use
      to continue the changes.

  * xharbour/source/rtl/hbffind.c

  * xharbour/source/rtl/bkgtsks.c
    * chose unique TaskID in hb_backgroundAddFunc() when counter reach
      maximum value
    ! removed hb_itemRelese in hb_backgroundDelFunc() - it's necessary if
      HB_BACKGROUNDDEL() should return codeblock.
      It should be documented that on C level caller of hb_backgroundDelFunc()
      should make hb_itemRelease() on returned value if is not NULL

2004-04-05 07:30 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/rtl/hbxml.c
    ! fix inconsistent function declarations

  * source/compiler/harbour.c
  * source/compiler/hbfunchk.c
  * source/compiler/cmdcheck.c
  * source/compiler/hbgenerr.c
  * source/compiler/hbpcode.c
    ! code formatting, mainly replace tabs -> spaces, put single-liner
      into {} per xHarbour coding convention.

2004-04-05 01:43 UTC+0200 Francesco Saverio Giudice <info / at / fsgiudice.com>
  * source/include/thread.h
    * added to thread stack background section:
      ULONG  ulBackgroundID;
  * source/vm/thread.c
    * added to thread stack background section ulBackgroundID initialization
  * source/rtl/bkgtsks.c
    * added s_ulBackgroundID to ST and MT
    * fixed initialization of ulTaskID

2004-04-05 01:05 UTC+0200 Giancarlo Niccolai <antispam [at] niccolai/dot/ ws>
  * include/hbxml.h
  * source/rtl/hbxml.c
    ! now internal functions are static; unused mxml functions are commented
      out (size of hbxml.o is reduced by 10%).
    ! fixed ret value in mxml_sgs_extract.

2004-04-05 05:15 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/rtl/filesys.c
    ! Definition of __inline functions for certain version of _MSC_VER (?)
      which does not support __inline functions when X__WIN32__ is defined.
      Those supports __inline may define __USE_INLINE__ when compiling
      filesys.c to gain speed.

  * source/rtl/bkgtsks.c
    ! Minor corrections on line 118: NULL -> 0
      Some compilers treats NULL as void *, so NULL is rejected here.

2004-04-04 21:55 UTC+0200 Francesco Saverio Giudice <info / at / fsgiudice.com>
  * source/include/hbapi.h
    * changed HB_BACKGROUNDTASK struct to add new
      ULONG    ulTaskID;     /* task identifier */
  * source/rtl/bkgtsks.c
    * changed functions to support task identifier intead of task item pointer
    * changed memcpy() to memmove() as Przemek suggests.

2004-04-04 15:45 UTC+0100 Marek Paliwoda <paliwoda@inetia.pl>
  * source/vm/fm.c
    ! fixd typo piuHolders -> puiHolders

2004-04-03 22:00 UTC-0300 Marcelo Lombardo <marcelo@xharbour.com.br>
  * source/rtl/hbhex2n.c
    + Additional conversion casts to MSVC on previous commit

2004-04-04 16:30 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/vm/hvm.c
  * source/rtl/hbserv.c
  * include/hbserv.h
    ! change hb_seriviceExit() => hb_serviceExit() for more readability :-)

2004-04-04 10:56 UTC+0200 Lorenzo Fiorini <lorenzo_fiorini/at/tin.it>
  * source/vm/mainwin.c
  * source/vm/hvm.c
    * changed froceLinkMain into forceLinkMain and moved outside extern "C"
      to allow build with OpenWatcom
  * source/rtl/hbhex2c.c
    * added OpenWatcom and mingw defines to exclude broken HB_STRTOHEX, HB_HEXTOSTR
      until the fix

2004-04-03 16:00 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/vm/fastitem.c
    ! Fixed typo in hb_itemCopy() and hb_itemClearMT()
    + Added logic to detect and generate an error on premature string release.

2004-04-04 04:25 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/compiler/hbusage.c
  * source/compiler/harbour.c
    ! code formatting, mainly putting single-line if,else,while into
      curly brackets as per xHarbour coding convention
    ! remove one TODO item (harbour.exe command line):
       @<file> => compile list of modules in <file>

    /*
    New syntax: harbour.exe @mylist.rsp
       mylist.rsp is a plain text file containing a PRG file in each line.

    Example:
    .---
    |  main.prg
    |  process.prg
    |  doc.prg
    `---
    */

2004-04-03 16:55 UTC-0300 Marcelo Lombardo <marcelo@xharbour.com.br>
  * source/rtl/hbhex2n.c
    + Added function HB_STRTOHEX()
    + Added function HB_HEXTOSTR()

2004-04-03 09:12 UTC-0500 Sylvain Robert <s.robert/at/videotron.ca>
  * source/rtl/filesys.c
    * hb_fsCreate() set the error to _doserrno if possible for MSVC

2004-04-03 13:58 UTC+0200 Giancarlo Niccolai <antispam [at] niccolai/dot/ ws>
  * include/hbapi.h
  * source/vm/garbage.c
  * source/vm/memvars.c
  * source/vm/thread.c
    + added hb_memvarsIsMemvarRefMT to reference local stack memvars in GC
      Mark loop.
    ! fixed GC marking of memvars under MT.

2004-04-02 19:39 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * source/vm/fastitem.c

  * source/vm/memvars.c
    + Reinstated condition for Detached Locals in hb_memvarsRelease()

2004-04-02 18:01 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * include/hbapi.h
    ! Corrected HB_IS*() to NOT use complex and wrong HB_IS_OF_TYPE()

  * include/hbfast.h
  * source/vm/fastitem.c
    - Removed redundant hb_fastClear()

  * source/compiler/hbpcode.c
    - Deffed OUT content of hb_compStrongType() - outdated!

  * source/rtl/filesys.c
    + Added temporary hack for xCC to provide _doserrno functionality.

  * source/vm/fastitem.c
  * source/vm/arrays.c
  * source/vm/memvars.c
  * source/vm/asort.c
  * source/vm/estack.c
  * source/vm/hvm.c
    + Added OWNERS support for HB_IT_BYREF

  * source/vm/fastitem.c
  * source/vm/arrays.c
  * source/vm/memvars.c
    ! Corrected HB_IS_*() to ->type == * (before reviewing and correcting HB_IS_*())

  * source/vm/codebloc.c
    ! Fixed GPF Trap in hb_codeblockDeleteGarbage()

  * source/vm/garbage.c
    * Converted static s_bReleaseAll to global hb_gc_bReleaseAll

  * source/vm/itemapi.c
    * Corrected compile warning

2004-04-03 02:59 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * xharbour/config/dos/djgpp.cf
  * xharbour/config/w32/mingw32.cf
    * added -W to C compilation flags

2004-04-03 02:37 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * xharbour/source/compiler/harbour.slx
  * xharbour/source/macro/macro.slx
   * warning fixes - removed redundant assignment in CUSTOM_ACTION()
     macro

  * xharbour/source/rtl/gtnul/gtsys.c
   * fixed GT request inside C function and type which
     existed in gtnul.c for a long time - thanks Andi

  * xharbour/source/vm/arrays.c
    * add to debug markers 'U' suffix to avoid warnings

  * source/pp/ppcore.c
  * utils/hbtest/rt_misc.prg
    * preproceses '**' into '^' like Clipper.
      (borrowed from Harbour, by Ryszard Glab)

2004-04-03 05:50 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/rtl/filesys.c
    ! commented unused variables

  * source/vm/maindllh.c
  * source/vm/maindllp.c
  * source/vm/mainwin.c
  * source/vm/mainstd.c
    ! put codes under extern "C"

2004-04-03 00:31 UTC+0200 Giancarlo Niccolai <antispam [at] niccolai/dot/ ws>
  * source/rtl/hbxml.c
    ! fixed castings
  /* Plz, someone add stricter casting to GCC compilation */

2004-04-03 05:10 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * include/hbapigt.h
  * include/hbapicdp.h
    ! changed: "extern HB_FUNC" => "HB_FUNC_EXTERN"

2004-04-02 23:45 UTC+0200 Giancarlo Niccolai <antispam [at] niccolai/dot/ ws>
  * source/rtl/filesys.c
    ! Under windows with X__WIN__ on, hb_fsOpenProcess was failing
      if the file was not found in the path, but was available
      in the relative path.

  * source/rtl/hbxml.c
    % Changed memory deallocation strategy (great speedup).

  * tests/xmltest.prg
    * Fix doc strings.

  + tests/xmliter.prg
    + Added a test for xml iterators; they were in (in fact,
      they are internally used by XmlDocument class for
      findfirst/findnext operations) but documentation is
      missing; I will commit docs ASAP but this test helps
      to understand.

2004-04-03 02:55 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * utils/hbtest/rt_file.prg
    + add routine to test FError() upon "Access denied"

2004-04-02 14:00 UTC-0500 Sylvain Robert <s.robert/at/videotron.ca>
  * source/rdd/dbf1.c
    + Add Os error code to the  error object in hb_dbfCreate()
      (clipper compatibility)

2004-04-02 13:30 UTC-0500 Sylvain Robert <s.robert/at/videotron.ca>
  * source/rtl/filesys.c
    * hb_fsCreate() set the error to _doserrno if possible for MSVC

2004-04-02 20:00 UTC+0200 Lorenzo Fiorini <lorenzo_fiorini/at/tin.it>
  * source/vm/fastitem.c
    * corrected a typo that caused memory leaks

2004-04-02 09:00 UTC-0500 Sylvain Robert <s.robert/at/videotron.ca>
  * source/rtl/philes.c
    * hb_fsError() translate from 32 to 5 for MSVC in Ferror()
      (clipper compatibility)

2004-04-02 14:33 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  + xharbour/source/rtl/gtnul/gtsys.c
    + GTSYS added. It forces to link in MULTI GT mode the default
      build GT. Without it GTNUL pass all reference so smart linkers
      drop any other GT libs on if you don't add to your sources
         REQUEST HB_GT_<gtname>
      So far such REQUEST with default build GT was inside gtnul.c
      so final program always has to be linked with the default GT.
      Now user can disable this feature by adding to his sources:
         ANNOUNCE GTSYS
      This is the same mechanism as RDD use in RDDSYS()
      Sorry I missed to add this file in my previous commit()

  * xharbour/tests/bldtest/Makefile
    * fixed typo

2004-04-02 07:16 UTC-0500 Sylvain Robert <s.robert/at/videotron.ca>
  * source/rtl/errorsys.prg
    * if the error object have no argument don't add the text "Arguments:"
      to cMessage

2004-04-02 06:00 UTC-0500 Sylvain Robert <s.robert/at/videotron.ca>
  * source/rtl/hbffind.c
    ! WintoDosError() was returning 0 instead of the old Error value
      if no error code translation was made.

2004-04-02 13:12 UTC+0200 Giancarlo Niccolai <antispam [at] niccolai/dot/ ws>
  * source/rtl/gtxvt/gtxvt.c
    ! Keypad was not working; fixed
    ! XGrabKey() was used to grab K_CTRL and K_ALT keys to work,
      but it prevented some compose/alternative keycodes to be
      correctly parsed by the server. Temporarily removed (in
      search for a better solution).

2004-04-02 05:30 UTC-0500 Sylvain Robert <s.robert/at/videotron.ca>
  * source/rtl/filesys.c
    ! Fixed R/T error when trying to open a DBF in Exclusive mode and
      a sharing violation occur (_doserrno==32) by removing special error
      translation for MSVC in hb_fsSetError()
  * hb_fsOpen() set the error to _doserrno if possible for MSVC

2004-04-01 20:40 UTC-0800 Ron Pinkas <ron@ronpinkas.com>
  * include/hbvmpub.h
    * Removed Member <itemsbase> in favor of NEW Member <pBaseArray>

  * source/vm/arrays.c
  * source/vm/hvm.c
    ! Fixed creation of BYREF items into Arrays to use new pBaseArray Member.

  * source/vm/itemapi.c
    ! Fixed de-referencing of of BYREF items into Arrays to use new pBaseArray Member.
    + Added logic detect and generate R/T Error upon refernce into array being out of bound.

  * source/vm/garbage.c
    + Added logic to Mark the Base Array of a BYREF Item in Sweep Scan.

  * source/vm/fastitem.c
    * Removed some redundant ()

  /* The above fixes critical GPF traps related to BYREF item pointing into an Array Element. */

2004-04-02 03:28 UTC+0200 Francesco Saverio Giudice <info / at / fsgiudice.com>
  * source/rtl/bkgtsks.c
    * warnings fixed

2004-04-02 02:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * xharbour/contrib/rdd_ads/adsfunc.c
    * warnings fixed

2004-04-02 00:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * xharbour/contrib/rdd_ads/ads1.c
  * xharbour/contrib/rdd_ads/adsfunc.c
  * xharbour/include/simplex.c
  * xharbour/source/rtl/hbserv.c
  * xharbour/source/rtl/hbxml.c
  * xharbour/source/rtl/inkey.c
  * xharbour/source/rtl/readline.c
  * xharbour/source/rtl/regex.c
  * xharbour/source/vm/arrays.c
  * xharbour/source/vm/errorapi.c
  * xharbour/source/vm/thread.c
    * warnings fixed, some of them were real bugs

  * xharbour/source/rtl/gtnul/Makefile
  * xharbour/source/rtl/gtnul/gtnul.c
  + xharbour/source/rtl/gtnul/gtsys.c
    + added GTSYS() which works in similar way as RDDSYS
      when user will want to disable linking with default build GT
      then simply should add into his code: ANNOUNCE GTSYS
      Gian I hope you will find it useful for XWT and linking with
      pure GTNUL only.

2004-04-02 04:35 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/compiler/hbusage.c
    + add the following gentlemen into credit section:
       * Jose F. Gimenez <jfgimenez@wanadoo.es>
       * Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>
       * Sylvain Robert <s.robert@videotron.ca>
       * Vicente Guerra <vicente@guerra.com.mx>

2004-04-02 03:45 UTC+0700 Andi Jahja <xharbour@cbn.net.id>
  * source/compiler/genc.c
    ! minor formatting and comments

  * include/hbdefs.h
    ! simplified HB_FUNC* macros

  * Rename ChangeLog to ChangeLog.019
